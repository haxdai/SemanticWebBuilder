<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : survey.xml
    Created on : 23 de agosto de 2010, 06:29 PM
    Author     : juan.fernandez
    Description:
        Purpose of the document follows.
-->
<db xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    
    <!--
    
    CREATE TABLE sr_answer(
      answerid NUMBER(20) DEFAULT 0 NOT NULL,
      idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
      questionid NUMBER(20) DEFAULT 0 NOT NULL,
      responseid NUMBER(20) DEFAULT 0 NOT NULL,
      stringxml LONG,
      score NUMBER(10) DEFAULT 0 NOT NULL,
      mark NUMBER(1) DEFAULT 0,
      secuentialid NUMBER(3) DEFAULT 0,
      created DATE NOT NULL,
      lastupdate DATE NOT NULL);
    ALTER TABLE sr_answer
    ADD (PRIMARY KEY (answerid,idtm));
    CREATE INDEX ind_questionid ON sr_answer(
      questionid ASC);
    CREATE INDEX ind_responseid ON sr_answer(
      responseid ASC);
    
    -->

	<table name="sr_answer(">
		<column id="answerid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
		<column id="questionid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
                <column id="responseid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="stringxml" type="VARCHAR" size="4000" acceptNulls="true"/>
		<column id="score" type="INTEGER" size="10" acceptNulls="false"/>
		<column id="mark" type="SMALLINT" size="1" default="0"/>
                <column id="secuentialid" type="INTEGER" size="3" acceptNulls="false"/>
                <column id="created" type="TIMESTAMP" size="14" acceptNulls="false"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_answer">
		<colpk id="answerid"/>
		<colpk id="idtm"/>
        </primarykey>

        <index name="ind_questionid" table="sr_answer" >
		<colindex id="questionid" order="ASC"/>
        </index>

        <index name="ind_responseid" table="sr_answer" >
		<colindex id="responseid" order="ASC"/>
        </index>

<!--

CREATE TABLE sr_validatecode(
  codeid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  title VARCHAR2(50) DEFAULT ' ' NOT NULL,
  description VARCHAR2(255) DEFAULT ' ' NOT NULL,
  validationcode LONG,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_validatecode
ADD (PRIMARY KEY (codeid,idtm));

-->

	<table name="sr_validatecode(">
		<column id="codeid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="title" type="VARCHAR" size="50" default=" " acceptNulls="true"/>
                <column id="description" type="VARCHAR" size="255" default=" " acceptNulls="true"/>
                <column id="validationcode" type="VARCHAR" size="4000" acceptNulls="true"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_validatecode">
		<colpk id="codeid"/>
		<colpk id="idtm"/>
        </primarykey>

<!--
CREATE TABLE sr_controlcatalog(
  controlid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  title VARCHAR2(50) DEFAULT ' ' NOT NULL,
  description VARCHAR2(255) DEFAULT ' ' NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_controlcatalog
ADD (PRIMARY KEY (controlid,idtm));

-->

	<table name="sr_controlcatalog">
		<column id="controlid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="title" type="VARCHAR" size="50" default=" " acceptNulls="true"/>
                <column id="description" type="VARCHAR" size="255" default=" " acceptNulls="true"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>
        
        <primarykey table="sr_controlcatalog">
		<colpk id="controlid"/>
		<colpk id="idtm"/>
        </primarykey>


<!--

CREATE TABLE sr_freqanswer(
  freqanswerid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  title VARCHAR2(255) DEFAULT ' ' NOT NULL,
  stringxml LONG,
  groupaid NUMBER(20) DEFAULT 0 NOT NULL,
  isreuse NUMBER(1) DEFAULT 0 NOT NULL,
  created DATE NOT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_freqanswer
ADD (PRIMARY KEY (freqanswerid,idtm));

-->

<table name="sr_freqanswer">
		<column id="freqanswerid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="title" type="VARCHAR" size="50" default=" " acceptNulls="true"/>
                <column id="stringxml" type="VARCHAR" size="4000" acceptNulls="true"/>
                <column id="groupaid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
                <column id="isreuse" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
                <column id="created" type="TIMESTAMP" size="14" acceptNulls="false"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_freqanswer">
		<colpk id="freqanswerid"/>
		<colpk id="idtm"/>
        </primarykey>



<!--
CREATE TABLE sr_groupanswer(
  groupaid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  title VARCHAR2(50) DEFAULT ' ' NOT NULL,
  description VARCHAR2(255) DEFAULT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_groupanswer
ADD (PRIMARY KEY (groupaid,idtm));


-->

    <table name="sr_groupanswer">
            <column id="groupaid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
            <column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
            <column id="title" type="VARCHAR" size="50" default=" " acceptNulls="true"/>
            <column id="description" type="VARCHAR" size="255" default=" " acceptNulls="true"/>
            <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
    </table>

    <primarykey table="sr_groupanswer">
            <colpk id="groupaid"/>
            <colpk id="idtm"/>
    </primarykey>


<!--

CREATE TABLE sr_category (
  categoryid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  title VARCHAR2(50) DEFAULT ' ' NOT NULL,
  description VARCHAR2(255) DEFAULT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_category
ADD (PRIMARY KEY (categoryid,idtm));

-->

    <table name="sr_category">
            <column id="categoryid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
            <column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
            <column id="title" type="VARCHAR" size="50" default=" " acceptNulls="true"/>
            <column id="description" type="VARCHAR" size="255" default=" " acceptNulls="true"/>
            <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
    </table>

    <primarykey table="sr_category">
            <colpk id="categoryid"/>
            <colpk id="idtm"/>
    </primarykey>

<!--

CREATE TABLE sr_orderquestion(
  surveyid NUMBER(20) DEFAULT 0 NOT NULL,
  questionid NUMBER(20) DEFAULT 0 NOT NULL,
  subjectid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  ordernum NUMBER(4) DEFAULT 0 NOT NULL,
  isactive NUMBER(1) DEFAULT 0 NOT NULL,
  isdata NUMBER(1) DEFAULT 0 NOT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_orderquestion
ADD (PRIMARY KEY (surveyid,questionid,subjectid,idtm));

-->

    <table name="sr_orderquestion">
            <column id="surveyid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
            <column id="questionid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
            <column id="subjectid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
            <column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
            <column id="ordernum" type="INTEGER" size="4" default="0" acceptNulls="false"/>
            <column id="isactive" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
            <column id="isdata" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
            <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
    </table>

    <primarykey table="sr_orderquestion">
            <colpk id="surveyid"/>
            <colpk id="questionid"/>
            <colpk id="subjectid"/>
            <colpk id="idtm"/>
    </primarykey>

<!--

CREATE TABLE sr_question(
  questionid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  question varchar2(4000) DEFAULT ' ' NOT NULL,
  instruction varchar2(255) DEFAULT NULL,
  codeid NUMBER(20) DEFAULT 0 NOT NULL,
  validated NUMBER(1) DEFAULT 0 NOT NULL,
  required NUMBER(1) DEFAULT 0 NOT NULL,
  validoptions NUMBER(10) DEFAULT 0 NOT NULL,
  controlid NUMBER(20) DEFAULT 0 NOT NULL,
  freqanswerid NUMBER(20) DEFAULT 0 NOT NULL,
  stringxml LONG,
  categoryid NUMBER(20) DEFAULT 0 NOT NULL,
  isreuse NUMBER(1) DEFAULT 0 NOT NULL,
  created DATE NOT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_question
ADD (PRIMARY KEY (questionid,idtm));
CREATE INDEX ind_textid ON sr_question(
  codeid ASC);
CREATE INDEX ind_controlid ON sr_question(
  controlid ASC);
CREATE INDEX ind_freqanswerid ON sr_question(
  freqanswerid ASC);

-->
<table name="sr_question">
		<column id="questionid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
		<column id="question" type="VARCHAR" size="4000" default=" " acceptNulls="false"/>
                <column id="instruction" type="VARCHAR" size="255" default="NULL" acceptNulls="true"/>
                <column id="codeid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
                <column id="validated" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
                <column id="required" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
                <column id="validoptions" type="BIGINT" size="10" default="0" acceptNulls="false"/>
                <column id="controlid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="freqanswerid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
                <column id="stringxml" type="BLOB" size="4000" acceptNulls="true"/>
                <column id="categoryid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="isreuse" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
                <column id="created" type="TIMESTAMP" size="14" acceptNulls="false"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_question">
		<colpk id="questionid"/>
		<colpk id="idtm"/>
        </primarykey>

        <index name="ind_textid" table="sr_question" >
		<colindex id="codeid" order="ASC"/>
        </index>

        <index name="ind_controlid" table="sr_question" >
		<colindex id="controlid" order="ASC"/>
        </index>

        <index name="ind_freqanswerid" table="sr_question" >
		<colindex id="freqanswerid" order="ASC"/>
        </index>


<!--

CREATE TABLE sr_relatedquestion(
  parentquestion NUMBER(20) DEFAULT 0 NOT NULL,
  sonquestion NUMBER(20) DEFAULT 0 NOT NULL,
  surveyid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_relatedquestion
ADD (PRIMARY KEY (parentquestion,sonquestion,surveyid,idtm));

-->

        <table name="sr_relatedquestion">
		<column id="parentquestion" type="BIGINT" size="20" default="0" acceptNulls="false"/>
                <column id="sonquestion" type="BIGINT" size="20" default="0" acceptNulls="false"/>
                <column id="surveyid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_relatedquestion(">
		<colpk id="parentquestion"/>
		<colpk id="sonquestion"/>
                <colpk id="surveyid"/>
                <colpk id="idtm"/>
        </primarykey>

<!--

CREATE TABLE sr_responseuser(
  responseid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  surveyid NUMBER(20) DEFAULT 0 NOT NULL,
  wbuser VARCHAR2(50) DEFAULT ' ' NOT NULL,
  currentquestion NUMBER(10) DEFAULT 0 NOT NULL,
  correctanswer NUMBER(10) DEFAULT 0 NOT NULL,
  wronganswer NUMBER(10) DEFAULT 0 NOT NULL,
  score NUMBER(10) DEFAULT 0 NOT NULL,
  review NUMBER(1) DEFAULT 0 NOT NULL,
  statistic NUMBER(1) DEFAULT 1 NOT NULL,
  comments varchar2(4000) DEFAULT NULL,
  finished NUMBER(1) DEFAULT 0 NOT NULL,
  created DATE NOT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_responseuser
ADD (PRIMARY KEY (responseid,idtm));
CREATE INDEX ind_surveyid ON sr_responseuser(
  surveyid ASC);
CREATE INDEX ind_email ON sr_responseuser(
  wbuser ASC);
-->

        <table name="sr_responseuser">
		<column id="responseid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="surveyid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
                <column id="wbuser" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="currentquestion" type="INTEGER" size="10" default="0" acceptNulls="false"/>
                <column id="correctanswer" type="INTEGER" size="10" default="0" acceptNulls="false"/>
                <column id="wronganswer" type="INTEGER" size="10" default="0" acceptNulls="false"/>
                <column id="score" type="NUMERIC" size="10" default="0" acceptNulls="false"/>
                <column id="review" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
                <column id="statistic" type="SMALLINT" size="1" default="1" acceptNulls="false"/>
                <column id="comments" type="VARCHAR" size="4000" acceptNulls="true"/>
                <column id="finished" type="SMALLINT" size="1" default="0" acceptNulls="false"/>
                <column id="created" type="TIMESTAMP" size="14" acceptNulls="false"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_responseuser">
		<colpk id="responseid"/>
		<colpk id="idtm"/>
        </primarykey>

        <index name="ind_surveyid" table="sr_responseuser" >
		<colindex id="surveyid" order="ASC"/>
        </index>

        <index name="ind_email" table="sr_responseuser" >
		<colindex id="wbuser" order="ASC"/>
        </index>

<!--

CREATE TABLE sr_subject(
  subjectid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  title VARCHAR2(50) DEFAULT ' ' NULL,
  description VARCHAR2(255) DEFAULT NULL,
  created DATE NOT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_subject
ADD (PRIMARY KEY (subjectid,idtm));

-->

        <table name="sr_subject">
		<column id="subjectid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="title" type="VARCHAR" size="50" default=" " acceptNulls="true"/>
                <column id="description" type="VARCHAR" size="255" default="NULL" acceptNulls="true"/>
                <column id="created" type="TIMESTAMP" size="14" acceptNulls="false"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_subject(">
		<colpk id="subjectid"/>
		<colpk id="idtm"/>
        </primarykey>

<!--

CREATE TABLE sr_survey(
  surveyid NUMBER(20) DEFAULT 0 NOT NULL,
  idtm VARCHAR(50) DEFAULT ' ' NOT NULL,
  res_id VARCHAR(50) DEFAULT ' ' NOT NULL,
  typeid NUMBER(10) DEFAULT 0 NOT NULL,
  min_score DECIMAL(10,2) DEFAULT NULL,
  max_answer NUMBER(3) DEFAULT 0,
  time_answer NUMBER(4) DEFAULT NULL,
  created DATE NOT NULL,
  lastupdate DATE NOT NULL);
ALTER TABLE sr_survey
ADD (PRIMARY KEY (surveyid,idtm));
CREATE INDEX ind_res_id ON sr_survey(
  res_id ASC);

  -->

        <table name="sr_survey">
		<column id="surveyid" type="BIGINT" size="20" default="0" acceptNulls="false"/>
		<column id="idtm" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="res_id" type="VARCHAR" size="50" default=" " acceptNulls="false"/>
                <column id="typeid" type="BIGINT" size="10" default="0" acceptNulls="false"/>
                <column id="min_score" type="DOUBLE" size="10" default="NULL" acceptNulls="true"/>
                <column id="max_answer" type="DOUBLE" size="3" default="0" acceptNulls="false"/>
                <column id="time_answer" type="DOUBLE" size="4" default="NULL" acceptNulls="true"/>
                <column id="created" type="TIMESTAMP" size="14" acceptNulls="false"/>
                <column id="lastupdate" type="TIMESTAMP" size="14" acceptNulls="false"/>
	</table>

        <primarykey table="sr_survey">
		<colpk id="surveyid"/>
		<colpk id="idtm"/>
        </primarykey>
        <index name="ind_res_id" table="sr_survey" >
		<colindex id="res_id" order="ASC"/>
        </index>


</db>










