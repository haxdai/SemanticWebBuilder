<?xml version="1.0" encoding="ISO-8859-1"?>
<admresource xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<xslfile>admresource.xslt</xslfile>
	<form name="frmVentana" action="true" method="POST" enctype="multipart/form-data">
		<admdbconnmgr defconn="true"/>
            <fieldset>
		<statictext name="general">
			<![CDATA[
				<font style="color: #428AD4; text-decoration: none; font-family: Verdana; font-size: 12px; font-weight: normal;">
				Passo 1 de 2. Dados gerais</font>
			]]>
		</statictext>		
		<input type="TEXT" name="title" label="Título:" size="50"/>
		<textarea name="text" label="* Texto:" rows="5" cols="50" wrap="virtual"/>
		<input type="FILE" name="img" label="* Imagem para conteúdo (bmp, gif, jpg, jpeg, swf):" showfile="true" msg="Imagem atual " filetype="bmp|jpg|jpeg|gif|swf" isshowfiletype="true" isremovefile="true" removemsg="Remover imagem" size="40"/>
		<input type="TEXT" name="alt" label="Texto altenativo para a imagem:" size="50"/>
		<input type="TEXT" name="url" label="Endereço web" size="50"/>
		<statictext name="txtTarget">Janela:</statictext>
		<input type="RADIO" name="target" label="Na mesma Janela" value="0"/>
		<input type="RADIO" name="target" label="Na Janela de origem e fechar Janela de pop-up" value="1" />
		<input type="RADIO" name="target" label="Na Janela de origem e não fechar Janela pop-up" value="2" />
		<input type="RADIO" name="target" label="Em uma nova Janela e fechar Janela pop-up" value="3" />
		<input type="RADIO" name="target" label="Em uma nova Janela e não fechar Janela pop-up" value="4" />
		<input type="CHECKBOX" name="bysession" label="Abrir uma Janela por seção" value="yes"/>		
                <statictext name="showCurrentTextColor">
                    <![CDATA[
                    <nobr>
                    Cor do texto (hexadecimal con prefijo #):&nbsp;
                    <input type="TEXT" id="textcolor" name="textcolor" value="{@db_textcolor}" size="7" maxlength="7" />
                    <span style="background-color:{@db_textcolor};">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    </nobr>
                    ]]>
                </statictext>
                <statictext name="chooseColor">
                    <![CDATA[
                    <table border="0" width="100%">
                    <tr>
                    <td>Outra cor do texto:</td>
                    <td><div id="cptextcolor">Outra cor do texto (hexadecimal):&nbsp;</div></td>
                    </tr>
                    </table>
                    <script src="/swb/swbadmin/js/jquery/colorpicker.js" type="text/javascript"></script>
                    <script type="text/javascript">
                    var colors=new Array('#ffffff', '#fff5ee', '#fff8dc', '#fffacd', '#ffffe0', '#98fb98', '#afeeee', '#e0ffff', '#e6e6fa', '#dda0dd',
                                       '#d3d3d3', '#ffc0cb', '#ffe4c4', '#ffe4b5', '#f0e68c', '#90ee90', '#20b2aa', '#87cefa', '#6495ed', '#ee82ee',
                                       '#c0c0c0', '#f08080', '#f4a460', '#ffa500', '#eee8aa', '#7fff00', '#48d1cc', '#87ceeb', '#7b68ee', '#da70d6',
                                       '#808080', '#ff0000', '#ff4500', '#ff8c00', '#ffff00', '#32cd32', '#8fbc8f', '#4169e1', '#6a5acd', '#ba55d3',
                                       '#696969', '#dc143c', '#d2691e', '#ff7f50', '#ffd700', '#228b22', '#2e8b57', '#0000ff', '#8a2be2', '#9932cc',
                                       '#2f4f4f', '#b22222', '#8b4513', '#a0522d', '#808000', '#008000', '#008b8b', '#0000cd', '#483d8b', '#8b008b',
                                       '#000000', '#8b0000', '#800000', '#a52a2a', '#556b2f', '#006400', '#006400', '#000080', '#4b0082', '#800080');            
                    $(document).ready(function(){
                        $('#cptextcolor').colorPicker(
                        {
                            //color:colors,
                            defaultColor:colors.indexOf('{@db_textcolor}'.toLowerCase()),
                            columns:10,
                            click:function(c){
                                $('#textcolor').val(c);
                            }
                        });
                    });
                    </script>
                    ]]>
                </statictext>
		<input type="FILE" name="backimg" label="Imagem para o fundo (bmp, gif, jpg, jpeg):" showfile="true" msg="Imagem atual " filetype="bmp|jpg|jpeg|gif" isshowfiletype="true" isremovefile="true" removemsg="Apagar imagem" size="40"/>
                <statictext name="showBkgrndColor">
                    <![CDATA[
                    <nobr>
                    Cor de fundo da Janela (hexadecimal):&nbsp;
                    <input type="TEXT" id="backcolor" name="backcolor" value="{@db_backcolor}" size="7" maxlength="7" />
                    <span style="background-color:{@db_backcolor};">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    </nobr>
                    ]]>
		</statictext>
                <statictext name="chooseBkgrndColor">
                    <![CDATA[
                    <table border="0" width="100%">
                    <tr>
                    <td>Outra cor de fundo da Janela:</td>
                    <td><div id="cpbackcolor">Outra cor de fundo da Janela (hexadecimal):&nbsp;</div></td>
                    </tr>
                    </table>
                    <script src="/swb/swbadmin/js/jquery/colorpicker.js" type="text/javascript"></script>
                    <script type="text/javascript">
                    var colors=new Array('#ffffff', '#fff5ee', '#fff8dc', '#fffacd', '#ffffe0', '#98fb98', '#afeeee', '#e0ffff', '#e6e6fa', '#dda0dd',
                                       '#d3d3d3', '#ffc0cb', '#ffe4c4', '#ffe4b5', '#f0e68c', '#90ee90', '#20b2aa', '#87cefa', '#6495ed', '#ee82ee',
                                       '#c0c0c0', '#f08080', '#f4a460', '#ffa500', '#eee8aa', '#7fff00', '#48d1cc', '#87ceeb', '#7b68ee', '#da70d6',
                                       '#808080', '#ff0000', '#ff4500', '#ff8c00', '#ffff00', '#32cd32', '#8fbc8f', '#4169e1', '#6a5acd', '#ba55d3',
                                       '#696969', '#dc143c', '#d2691e', '#ff7f50', '#ffd700', '#228b22', '#2e8b57', '#0000ff', '#8a2be2', '#9932cc',
                                       '#2f4f4f', '#b22222', '#8b4513', '#a0522d', '#808000', '#008000', '#008b8b', '#0000cd', '#483d8b', '#8b008b',
                                       '#000000', '#8b0000', '#800000', '#a52a2a', '#556b2f', '#006400', '#006400', '#000080', '#4b0082', '#800080');            
                    $(document).ready(function(){
                        $('#cpbackcolor').colorPicker(
                        {
                            //color:colors,
                            defaultColor:colors.indexOf('{@db_backcolor}'.toLowerCase()),
                            columns:10,
                            click:function(c){
                                $('#backcolor').val(c);
                            }
                        });
                    });
                    </script>
                    ]]>
		</statictext>
		<statictext name="window">
			<![CDATA[
				<br><br><font style="color: #428AD4; text-decoration: none; font-family: Verdana; font-size: 12px; font-weight: normal;">
				Passo 2 de 2. Configuração da janela</font>
			]]>
		</statictext>
		<input type="CHECKBOX" name="menubar" label="Barra de menús" value="1"/>
		<input type="CHECKBOX" name="toolbar" label="Barra de ferramentas" value="1"/>
		<input type="CHECKBOX" name="status" label="Barra de Status" value="1"/>
		<input type="CHECKBOX" name="location" label="Barra de Localização" value="1"/>
		<input type="CHECKBOX" name="directories" label="Barra de diretório" value="1"/>
		<input type="CHECKBOX" name="scrollbars" label="Barras de rolagem" value="1"/>
		<input type="CHECKBOX" name="resizable" label="Redimencionar o  tamaho da janela" value="1"/>
		<input type="TEXT" name="width" label="Largura da Janela (pixels):" size="4" maxlength="4" jsvaltype="js_numbers"/>
		<input type="TEXT" name="height" label="Altura da Janela (pixeles):" size="4" maxlength="4" jsvaltype="js_numbers"/>
		<input type="TEXT" name="top" label="Posição margem superior (pixels):" size="4" maxlength="4" jsvaltype="js_numbers"/>
		<input type="TEXT" name="left" label="Posição margem esquerdo (pixels):" size="4" maxlength="4" jsvaltype="js_numbers"/>
            </fieldset>
            <fieldset>
		<input type="SUBMIT" name="btnSave"  value="Salvar" onclick="if(jsValida(this.form)) return true; else return false;"/>
		<input type="RESET"  name="btnReset" value="Cancelar"/>
            </fieldset>
	</form>
	<statictext name="txtNote">
		<![CDATA[
			<font style="color: #428AD4; font-family: Verdana; font-size: 10px;">
				* Informe o texto da janela ou da imagem..
			</font>
		]]>
	</statictext>
	<script language="JavaScript">
		<![CDATA[
			if(!document.frmVentana.target[0].checked && !document.frmVentana.target[1].checked && 
				!document.frmVentana.target[2].checked && !document.frmVentana.target[3].checked && 
				!document.frmVentana.target[4].checked)
				document.frmVentana.target[4].checked=true;
				
			function jsValida(frm)
			{
				if(frm.text.value==null || frm.text.value=='' || frm.text.value==' ')
				{
					if(frm.wbfile_img==undefined && (frm.img.value==null || frm.img.value=='' || frm.img.value==' '))
					{
						alert('Informe o texto da janela ou da imagem.');
						frm.text.focus();
						return false;
					}					
				}
				if(frm.hdntextcolor.value==null || frm.hdntextcolor.value=='' || frm.hdntextcolor.value==' ')
					frm.textcolor.value='#'+ document.wbcolor.getColor();
				else frm.textcolor.value=frm.hdntextcolor.value;

				if(frm.hdnbackcolor.value==null || frm.hdnbackcolor.value=='' || frm.hdnbackcolor.value==' ')
					frm.backcolor.value='#'+ document.wbbgcolor.getColor();
				else frm.backcolor.value=frm.hdnbackcolor.value;

				if(!isFormat(frm.textcolor)) return false;
				if(!isFormat(frm.backcolor)) return false;
				replaceChars(frm.text);	
				return true;
			}
			function isFormat(pIn)
			{
				var swFormat="0123456789ABCDEF";
				pIn.value=pIn.value.toUpperCase();
				if(pIn.value.length<7)
				{
					alert('O tamanho do campo não corresponde ao formato.');
					if(pIn.type=="text") pIn.focus();
					return false;
				}
				if (!setPrefix(pIn, '#')) return false;
				for(var i=1; i < pIn.value.length; i++)
				{
					swOk= pIn.value.substring(i, i+1);
					if (swFormat.indexOf(swOk, 0)==-1)
					{
						alert('O valor definido não corresponde ao formato hexadecimal.');
						if(pIn.type=="text") pIn.focus();
						return false;
					}
				}
				return true;
			}
			function setPrefix(pIn, pPx)
			{
				if(pIn.type=="text" || pIn.type=="hidden")
				{
					if (pIn.value.substring(0, pPx.length).indexOf(pPx)==-1)
					{
						alert('O valor definido não corresponde ao formato: ' + pPx);
						pIn.value=pPx+pIn.value;
						if(pIn.type=="text") pIn.focus();
						return false;
					}
				}
				if(pIn.type=="select-one" || pIn.type=="select-multiple")
				{
					for(var i=0; i<pIn.length; i++)
					{
						if (pIn.options[i].value.substring(0, pPx.length).indexOf(pPx)==-1)
						{
							alert('O valor definido não corresponde ao formato: ' + pPx);
							pIn.focus();
							return false;
						}
					}
				}
				return true;
			}
			function replaceChars(pIn)
			{
				out = "\r"; // replace this
				add = "<br/>"; // with this
				temp = "" + pIn.value; // temporary holder
				while (temp.indexOf(out)>-1)
				{
					pos= temp.indexOf(out);
					temp = "" + (temp.substring(0, pos) + add + temp.substring((pos + out.length), temp.length));
				}
				out = "\n"; // replace this
				add = " "; // with this
				temp = "" + temp; // temporary holder
				while (temp.indexOf(out)>-1)
				{
					pos= temp.indexOf(out);
					temp = "" + (temp.substring(0, pos) + add + temp.substring((pos + out.length), temp.length));
				}
				pIn.value = temp;
			}			
		]]>
	</script>
</admresource>
