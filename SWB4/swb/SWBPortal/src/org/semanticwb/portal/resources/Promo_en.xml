<?xml version="1.0" encoding="ISO-8859-1"?>
<admresource xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<xslfile>admresource.xslt</xslfile>
	<form name="frmPromo" action="true" method="POST" enctype="multipart/form-data">
		<admdbconnmgr defconn="true"/>
		<input type="TEXT" name="title" label="Promotional title:" size="50"/>
		<textarea name="text" label="* Text:" rows="5" cols="50" wrap="virtual" jsrequired="true"/>
		<input type="FILE" name="img" label="Image (bmp, gif, jpg, jpeg):" showfile="true" filetype="bmp|jpg|jpeg|gif" isshowfiletype="true" isremovefile="true" removemsg="Remove image" size="40"/>
		<img label="Image position regarding text:" src="{@webpath}/swbadmin/images/posicion.gif" usemap="#positionmap" border="0"/>
		<map name="positionmap">
			<area shape="rect" coords="1,1,20,17"   onclick="javascript:document.frmPromo.pos.value=1;" title="1" alt="1.- Top - Left" />
			<area shape="rect" coords="24,3,44,18"  onclick="javascript:document.frmPromo.pos.value=2;" title="2" alt="2.- Right" />
			<area shape="rect" coords="48,1,68,18"  onclick="javascript:document.frmPromo.pos.value=3;" title="3" alt="3.- Top" />
			<area shape="rect" coords="0,22,20,40"  onclick="javascript:document.frmPromo.pos.value=4;" title="4" alt="4.- Top - Right" />
			<area shape="rect" coords="24,22,44,40" onclick="javascript:document.frmPromo.pos.value=5;" title="5" alt="5.- Left" />
			<area shape="rect" coords="48,21,68,40" onclick="javascript:document.frmPromo.pos.value=6;" title="6" alt="6.- Bottom" />
			<area shape="rect" coords="71,1,92,19"  onclick="javascript:document.frmPromo.pos.value=7;" title="7" alt="7.- Bottom - Left" />
			<area shape="rect" coords="71,21,92,41" onclick="javascript:document.frmPromo.pos.value=8;" title="8" alt="8.- Bottom - Right" />
		</map>		
		<input type="TEXT" name="pos" size="2" maxlength="1" jsvaltype="js_numbers" value="3"/>
		<input type="TEXT" name="width" label="Width (pixels):" size="4" maxlength="4" jsvaltype="js_numbers"/>
		<input type="TEXT" name="height" label="Height (pixels):" size="4" maxlength="4" jsvaltype="js_numbers"/>
		<statictext name="txtUline">Underlined text:</statictext>
		<input type="RADIO" name="uline" label="Yes" value="1"/>                
		<input type="RADIO" name="uline" label="No" value="0" />
                
                <statictext name="showCurrentTextColor">
                    <![CDATA[
                    <nobr>
                    Text Color (hexadecimal):&nbsp;
                    <input type="TEXT" id="textcolor" name="textcolor" value="{@db_textcolor}" size="7" maxlength="7" />
                    <span style="background-color:{@db_textcolor};">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    </nobr>
                    ]]>
                </statictext>
                <statictext name="chooseColor">
                    <![CDATA[
                    <table border="0" width="100%">
                    <tr>
                    <td>Another Text Color (hexadecimal):</td>
                    <td><div id="cptextcolor">Otro color de texto (hexadecimal):&nbsp;</div></td>
                    </tr>
                    </table>
                    <script src="/swb/swbadmin/js/jquery/colorpicker.js" type="text/javascript"></script>
                    <script type="text/javascript">
                    var colors=new Array('#ffffff', '#fff5ee', '#fff8dc', '#fffacd', '#ffffe0', '#98fb98', '#afeeee', '#e0ffff', '#e6e6fa', '#dda0dd',
                                       '#d3d3d3', '#ffc0cb', '#ffe4c4', '#ffe4b5', '#f0e68c', '#90ee90', '#20b2aa', '#87cefa', '#6495ed', '#ee82ee',
                                       '#c0c0c0', '#f08080', '#f4a460', '#ffa500', '#eee8aa', '#7fff00', '#48d1cc', '#87ceeb', '#7b68ee', '#da70d6',
                                       '#808080', '#ff0000', '#ff4500', '#ff8c00', '#ffff00', '#32cd32', '#8fbc8f', '#4169e1', '#6a5acd', '#ba55d3',
                                       '#696969', '#dc143c', '#d2691e', '#ff7f50', '#ffd700', '#228b22', '#2e8b57', '#0000ff', '#8a2be2', '#9932cc',
                                       '#2f4f4f', '#b22222', '#8b4513', '#a0522d', '#808000', '#008000', '#008b8b', '#0000cd', '#483d8b', '#8b008b',
                                       '#000000', '#8b0000', '#800000', '#a52a2a', '#556b2f', '#006400', '#006400', '#000080', '#4b0082', '#800080');            
                    $(document).ready(function(){
                        $('#cptextcolor').colorPicker(
                        {
                            //color:colors,
                            defaultColor:colors.indexOf('{@db_textcolor}'.toLowerCase()),
                            columns:10,
                            click:function(c){
                                $('#textcolor').val(c);
                            }
                        });
                    });
                    </script>
                    ]]>
                </statictext>
                
		<input type="TEXT" name="url" label="Web address" size="50"/>
		<statictext name="txtTarget">In a new window:</statictext>
		<input type="RADIO" name="target" label="Yes" value="1"/>
		<input type="RADIO" name="target" label="No" value="0" />               
		<input type="SUBMIT" name="btnSave"  value="Save" onclick="if(jsValida(this.form)) return true; else return false;"/>
		<input type="RESET"  name="btnReset" value="Cancel"/>
	</form>
	<statictext name="txtNote">
		<![CDATA[
			<font style="color: #428AD4; font-family: Verdana; font-size: 10px;">
				* Required information.
			</font>
		]]>
	</statictext>
	<script language="JavaScript">
            <![CDATA[
                    if(!document.frmPromo.uline[0].checked && !document.frmPromo.uline[1].checked)
                            document.frmPromo.uline[1].checked=true;
                    if(!document.frmPromo.target[0].checked && !document.frmPromo.target[1].checked)
                            document.frmPromo.target[1].checked=true;

                    function jsValida(frm)
                    {
                        /*if(frm.anotherColor.value==null || frm.anotherColor.value=='' || frm.anotherColor.value==' ') {
                            frm.anotherColor.value='#'+ document.wbcolor.getColor();
                        }else {
                            frm.anotherColor.value=frm.anotherColor.value;
                        }*/

                        if(frm.pos.value==null || frm.pos.value=='' || frm.pos.value==' ')
                        {
                                if(frm.img.value!=null && frm.img.value!='' && frm.img.value!=' ')
                                {
                                        alert('Please indicate the image position.');
                                        frm.pos.focus();
                                        return false;
                                }
                        }
                        if(!isFormat(frm.anotherColor)) return false;
                        replaceChars(frm.text);	
                        return true;
                    }

                    function isFormat(pIn)
                    {
                            var swFormat="0123456789ABCDEF";
                            pIn.value=pIn.value.toUpperCase();
                            if(pIn.value.length<7)
                            {
                                    alert('The field lenght does not correspond to the format.');
                                    if(pIn.type=="text") pIn.focus();
                                    return false;
                            }
                            if (!setPrefix(pIn, '#')) return false;
                            for(var i=1; i < pIn.value.length; i++)
                            {
                                    swOk= pIn.value.substring(i, i+1);
                                    if (swFormat.indexOf(swOk, 0)==-1)
                                    {
                                            alert('The value defined does not correspond to hexadecimal format.');
                                            if(pIn.type=="text") pIn.focus();
                                            return false;
                                    }
                            }
                            return true;
                    }
                    function setPrefix(pIn, pPx)
                    {
                            if(pIn.type=="text" || pIn.type=="hidden")
                            {
                                    if (pIn.value.substring(0, pPx.length).indexOf(pPx)==-1)
                                    {
                                            alert('The value defined does not correspond to the format: ' + pPx);
                                            pIn.value=pPx+pIn.value;
                                            if(pIn.type=="text") pIn.focus();
                                            return false;
                                    }
                            }
                            if(pIn.type=="select-one" || pIn.type=="select-multiple")
                            {
                                    for(var i=0; i<pIn.length; i++)
                                    {
                                            if (pIn.options[i].value.substring(0, pPx.length).indexOf(pPx)==-1)
                                            {
                                                    alert('The value defined does not correspond to the format: ' + pPx);
                                                    pIn.focus();
                                                    return false;
                                            }
                                    }
                            }
                            return true;
                    }
                    function replaceChars(pIn)
                    {
                            out = "\r"; // replace this
                            add = "<br/>"; // with this
                            temp = "" + pIn.value; // temporary holder
                            while (temp.indexOf(out)>-1)
                            {
                                    pos= temp.indexOf(out);
                                    temp = "" + (temp.substring(0, pos) + add + temp.substring((pos + out.length), temp.length));
                            }
                            out = "\n"; // replace this
                            add = " "; // with this
                            temp = "" + temp; // temporary holder
                            while (temp.indexOf(out)>-1)
                            {
                                    pos= temp.indexOf(out);
                                    temp = "" + (temp.substring(0, pos) + add + temp.substring((pos + out.length), temp.length));
                            }
                            pIn.value = temp;
                    }			
            ]]>
	</script>
</admresource>
