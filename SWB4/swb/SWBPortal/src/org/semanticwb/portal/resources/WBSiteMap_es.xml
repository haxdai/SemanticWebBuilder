<?xml version="1.0" encoding="ISO-8859-1"?>
<admresource xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <xslfile>admresource.xslt</xslfile>
    <script type="text/javascript" language="JavaScript">
        <![CDATA[
            function jsValida(frm) {
                if( isNaN(parseInt(frm.level.value, 10)) ) {
                    alert('El nivel de despliegue debe ser numérico.');
                    frm.level.focus();
                    return false;
                }
                if( frm.width.value.length>0 && isNaN(parseInt(frm.width.value, 10)) ) {
                    alert('El ancho debe ser numérico.');
                    frm.width.focus();
                    return false;
                }
                if( frm.height.value.length>0 && isNaN(parseInt(frm.height.value, 10)) ) {
                    alert('El alto debe ser numérico.');
                    frm.height.focus();
                    return false;
                }
                if(frm.level.value < 1) {
                    alert("El nivel de despliegue debe ser mayor que cero.");
                    frm.level.focus();
                    return false;
                }
                return true;
            }
        ]]>
    </script>
    <form name="frmSiteMap" action="true" method="POST" enctype="multipart/form-data">
        <admdbconnmgr defconn="true"/>
        <fieldset legend="Datos">
            <input type="FILE" name="img" label="Imagen para el botón (bmp, gif, jpg, jpeg):" showfile="true" filetype="bmp|jpg|jpeg|gif" isshowfiletype="true" isremovefile="true" removemsg="Quitar imagen para mapa de sitio" moreattr="onclick=&#34;jsClear(this.form);&#34;" size="40"/>
            <input type="TEXT" name="alt" label="Texto alterno para la imagen:" size="50"/>
            <input type="TEXT" name="btntexto" label="Texto del botón en caso de no definir imagen:" size="50"/>
            <input type="TEXT" name="lnktexto" label="Texto de la liga en caso de no definir imagen ni botón:" size="50"/>
            <input type="TEXT" name="title" label="Título:" size="50"/>
            <input type="TEXT" name="level" label="Nivel de despliegue" size="2" jsvaltype="js_numbers" />
            <input type="TEXT" name="url" label="Sección que despliega el mapa de sitio:" size="50"/>
        </fieldset>

        <fieldset legend="Forma y estilo">
            <input type="TEXT" name="width" label="Ancho:" size="50" jsvaltype="js_numbers" />
            <input type="TEXT" name="height" label="Alto:" size="50" jsvaltype="js_numbers" />
            <input type="TEXT" name="blnstyle" label="Estilo del botón o de la liga según sea el caso:" size="50" />
        </fieldset>

        <fieldset>
            <statictext name="b">
            <![CDATA[
            <button id="btnSave" type="submit" name="btnSave" dojoType="dijit.form.Button">Guardar</button>
            <button id="btnReset" type="reset" name="btnReset" dojoType="dijit.form.Button">Reestablecer</button>
            ]]>
            </statictext>
        </fieldset>
    </form>


    <script type="text/javascript">
        <![CDATA[
        dojo.require("dijit.form.Button");

        dojo.addOnLoad(function(){
            dojo.connect(dijit.byId("btnSave"), "onClick",
                function() {
                    if(jsValida(dojo.byId("frmSiteMap"))) {
                        dojo.byId("frmSiteMap").submit();
                    }
                }
            );
        });

        dojo.addOnLoad(function(){
            dojo.connect(dijit.byId("btnReset"), "onClick",
                function() {
                    dojo.byId("frmSiteMap").reset();
                }
            );
        });
        ]]>
    </script>
</admresource>