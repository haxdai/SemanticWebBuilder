<?xml version="1.0" encoding="ISO-8859-1"?>
<admresource xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <xslfile>admresource.xslt</xslfile>
    <form name="frmAdmRes" action="true" method="post" enctype="multipart/form-data" jsframework="dojo" >
    <admdbconnmgr defconn="true"/>
    <fieldset legend="Configuración básica">
        <input type="radio" id="local0" name="local" label="Local" value="0" checked="true" moreattr="onclick='if(this.checked)dojo.byId(&#34;code&#34;).disabled=true; else dojo.byId(&#34;code&#34;).disabled=false;'" />

        <input type="text" id="url" name="url" label="Endereço Web:" promptMessage="Endereço Web" />
        <statictext name="txtTarget">Em uma nova janela:</statictext>
	<input type="RADIO" name="target" label="Sim" value="1"/>
	<input type="RADIO" name="target" label="Não" value="0"/>

        <input type="text" id="axn" name="axn" label="Acción:" promptMessage="Javascript ação, proposta no evento onclick" />

        <input type="FILE" name="img" label="** Imagem (jpg, jpeg, gif, png, swf):" showfile="true" filetype="jpg|jpeg|gif|png|swf" isshowfiletype="true" isremovefile="true" removemsg="Quitar imagen" size="40" />
        <input type="text" id="alt" name="alt" label="Texto alternativo:" promptMessage="Descrição indicativa do banner. Acessibilidade Orientação" />

        <textarea id="longdesc" name="longdesc" label="Descrição Long:" rows="5" cols="50" wrap="virtual" promptMessage="Indicativo contorno modo Ajuda banner da ação. Acessibilidade Orientação" />
    </fieldset>

    <fieldset legend="Aparência">
        <input type="text" id="width"  name="width" label="Largura da imagem:" maxlength="9" regExp="\d{1,9}(|px|in|cm|mm|pt|em|ex|%)" invalidMessage="Largura inválido" promptMessage="Largura da imagem. Ejemplos: 90%, 350px, 854" />
        <input type="text" id="height" name="height" label="Altura da imagem:" maxlength="9" regExp="\d{1,9}(|px|in|cm|mm|pt|em|ex|%)" invalidMessage="Altura inválido" promptMessage="Altura da imagem. Ejemplos: 90%, 350px, 854" />
    </fieldset>

    <fieldset legend="Avançado">
        <input type="radio" id="local1" name="local" label="Externo" value="1" moreattr="onclick='if(this.checked)dojo.byId(&#34;code&#34;).disabled=false; else dojo.byId(&#34;code&#34;).disabled=true;'" />
        <textarea id="code" name="code" label="* Código:" rows="5" cols="50" wrap="virtual"/>
        <input type="text" id="index" name="index" label="Índice:" maxlength="7" regExp="\d{1,7}" invalidMessage="Índice inválido" promptMessage="Imagem de índice numérico" />

        <statictext name="note">
        <![CDATA[
            <font style="color: #428AD4; font-family: Verdana; font-size:10px;">
            * Dato requerido para publicidad externa
            ** Dato requerido para publicidad local
            </font>
        ]]>
        </statictext>
    </fieldset>

    <fieldset>
        <input type="submit" name="btnSave" id="btnSave" value="Salvar" onclick="return jsValida(this.form)" />
        <input type="reset"  name="btnReset" id="btnReset" value="Restaurar" />
    </fieldset>
    </form>

    <script type="text/javascript">
        <![CDATA[
        if(!document.frmAdmRes.target[0].checked && !document.frmAdmRes.target[1].checked)
		document.frmAdmRes.target[1].checked=true;
        dojo.require("dijit.form.Button");
        dojo.require("dijit.form.ValidationTextBox");

        dojo.addOnLoad(
            function() {
                dojo.connect(dijit.byId("btnSave"), "onSubmit",
                    function() {
                        if(jsValida(dojo.byId("frmAdmRes")))
                            return true;
                        else
                            return false;
                    }
                );

                if(!dojo.byId('local0').checked && !dojo.byId('local1').checked) {
                    dojo.byId('local0').checked=true;
                }
                if(!dojo.byId('local1').checked) {
                    dojo.byId('code').disabled=true;
                }
            }
        );

        function jsValida(frm) {
            if(dojo.byId('local0').checked && !dojo.byId('img').value && !dojo.byId('wbNoFile_img')) {
                alert('Especifique una imagen para el banner');
                document.getElementById('img').focus();
                return false;
            }else if(dojo.byId('local1').checked) {
                if(dojo.byId('code').value==null || dojo.byId('code').value=='')
                {
                    alert('Defina la codificación para incluir la publicidad externa.');
                    dojo.byId('code').focus();
                    return false;
                }
            }
            return true;
        }
        ]]>
    </script>
</admresource>